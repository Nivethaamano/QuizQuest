<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>QuizQuest ‚Äî Master Your Knowledge</title>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet"/>
<style>
  :root {
    --bg: #070a12;
    --surface: #0e1220;
    --surface2: #151b2e;
    --border: rgba(99,120,255,0.18);
    --accent: #6378ff;
    --accent2: #a78bfa;
    --accent3: #38bdf8;
    --green: #34d399;
    --red: #f87171;
    --yellow: #fbbf24;
    --text: #e8ecf8;
    --muted: #6b7a9e;
    --card-glow: 0 0 40px rgba(99,120,255,0.08);
    --radius: 16px;
  }
  [data-theme="light"] {
    --bg: #f0f2ff;
    --surface: #ffffff;
    --surface2: #eef0ff;
    --border: rgba(99,120,255,0.2);
    --text: #111827;
    --muted: #6b7280;
    --card-glow: 0 4px 24px rgba(99,120,255,0.1);
  }

  * { margin:0; padding:0; box-sizing:border-box; }

  html { scroll-behavior: smooth; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    transition: background 0.4s, color 0.4s;
    overflow-x: hidden;
  }

  /* Background grid */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: 
      linear-gradient(rgba(99,120,255,0.04) 1px, transparent 1px),
      linear-gradient(90deg, rgba(99,120,255,0.04) 1px, transparent 1px);
    background-size: 44px 44px;
    pointer-events: none;
    z-index: 0;
  }

  /* Blobs */
  .blob {
    position: fixed;
    border-radius: 50%;
    filter: blur(80px);
    opacity: 0.12;
    pointer-events: none;
    z-index: 0;
    animation: blobFloat 12s ease-in-out infinite alternate;
  }
  .blob-1 { width:500px; height:500px; background: var(--accent); top:-100px; left:-100px; animation-delay: 0s; }
  .blob-2 { width:400px; height:400px; background: var(--accent2); bottom:-100px; right:-100px; animation-delay: -4s; }
  .blob-3 { width:300px; height:300px; background: var(--accent3); top:50%; left:50%; transform:translate(-50%,-50%); animation-delay: -8s; }
  @keyframes blobFloat { from{transform:translate(0,0);} to{transform:translate(30px,30px);} }
  .blob-3 { animation: blobFloat3 14s ease-in-out infinite alternate; }
  @keyframes blobFloat3 { from{transform:translate(-50%,-50%) scale(1);} to{transform:translate(-50%,-50%) scale(1.15);} }

  /* NAVBAR */
  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 1000;
    padding: 0 32px;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(7,10,18,0.7);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
    transition: background 0.4s;
  }
  [data-theme="light"] nav {
    background: rgba(240,242,255,0.8);
  }
  .nav-brand {
    font-family: 'Syne', sans-serif;
    font-weight: 800;
    font-size: 1.5rem;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: -0.5px;
  }
  .nav-right { display:flex; align-items:center; gap:8px; }
  .nav-link-btn {
    background: none;
    border: none;
    color: var(--muted);
    font-family: 'DM Sans', sans-serif;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    padding: 8px 16px;
    border-radius: 8px;
    transition: color 0.2s, background 0.2s;
    text-decoration: none;
  }
  .nav-link-btn:hover { color: var(--text); background: var(--surface2); }
  .theme-btn {
    background: var(--surface2);
    border: 1px solid var(--border);
    color: var(--text);
    cursor: pointer;
    width: 38px; height: 38px;
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 1rem;
    transition: all 0.2s;
  }
  .theme-btn:hover { border-color: var(--accent); box-shadow: 0 0 10px rgba(99,120,255,0.3); }

  /* HERO */
  .hero {
    position: relative;
    z-index: 1;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 100px 24px 60px;
  }
  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: rgba(99,120,255,0.12);
    border: 1px solid rgba(99,120,255,0.3);
    border-radius: 100px;
    padding: 6px 16px;
    font-size: 0.8rem;
    font-weight: 500;
    color: var(--accent2);
    margin-bottom: 24px;
    animation: fadeUp 0.6s ease both;
  }
  .hero-title {
    font-family: 'Syne', sans-serif;
    font-size: clamp(3rem, 8vw, 6rem);
    font-weight: 800;
    line-height: 1.05;
    letter-spacing: -2px;
    margin-bottom: 24px;
    animation: fadeUp 0.6s 0.1s ease both;
  }
  .hero-title .gradient-text {
    background: linear-gradient(135deg, var(--accent), var(--accent2), var(--accent3));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .hero-sub {
    max-width: 560px;
    font-size: 1.1rem;
    line-height: 1.7;
    color: var(--muted);
    margin-bottom: 40px;
    animation: fadeUp 0.6s 0.2s ease both;
  }
  .hero-stats {
    display: flex;
    gap: 48px;
    justify-content: center;
    animation: fadeUp 0.6s 0.3s ease both;
    margin-bottom: 48px;
  }
  .stat { text-align: center; }
  .stat-num {
    font-family: 'Syne', sans-serif;
    font-size: 2rem;
    font-weight: 800;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .stat-label { font-size: 0.78rem; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; margin-top: 2px; }
  .cta-btn {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: white;
    border: none;
    padding: 16px 36px;
    border-radius: 14px;
    font-family: 'Syne', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
    box-shadow: 0 8px 32px rgba(99,120,255,0.4);
    animation: fadeUp 0.6s 0.35s ease both;
    text-decoration: none;
  }
  .cta-btn:hover { transform: translateY(-2px); box-shadow: 0 12px 40px rgba(99,120,255,0.55); }
  .cta-btn svg { width:18px; height:18px; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(24px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  /* FEATURES */
  .section {
    position: relative;
    z-index: 1;
    padding: 80px 24px;
    max-width: 1100px;
    margin: 0 auto;
  }
  .section-label {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: var(--accent);
    margin-bottom: 12px;
  }
  .section-title {
    font-family: 'Syne', sans-serif;
    font-size: clamp(1.8rem, 4vw, 2.8rem);
    font-weight: 800;
    letter-spacing: -1px;
    margin-bottom: 48px;
  }
  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 20px;
  }
  .feature-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 28px;
    transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s;
    position: relative;
    overflow: hidden;
  }
  .feature-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    opacity: 0;
    transition: opacity 0.3s;
  }
  .feature-card:hover { transform: translateY(-4px); box-shadow: var(--card-glow); border-color: var(--accent); }
  .feature-card:hover::before { opacity: 1; }
  .feature-icon {
    width: 48px; height: 48px;
    background: rgba(99,120,255,0.12);
    border: 1px solid rgba(99,120,255,0.2);
    border-radius: 12px;
    display: flex; align-items: center; justify-content: center;
    font-size: 1.4rem;
    margin-bottom: 16px;
  }
  .feature-title { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 1rem; margin-bottom: 8px; }
  .feature-desc { color: var(--muted); font-size: 0.875rem; line-height: 1.6; }

  /* LEADERBOARD STRIP */
  .leaderboard-strip {
    position: relative;
    z-index: 1;
    background: var(--surface);
    border-top: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
    padding: 40px 24px;
    margin: 20px 0;
  }
  .lb-title {
    text-align: center;
    font-family: 'Syne', sans-serif;
    font-size: 1.4rem;
    font-weight: 800;
    margin-bottom: 24px;
  }
  .lb-grid {
    display: flex;
    gap: 12px;
    justify-content: center;
    flex-wrap: wrap;
    max-width: 800px;
    margin: 0 auto;
  }
  .lb-item {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px 24px;
    display: flex;
    align-items: center;
    gap: 12px;
    min-width: 200px;
    transition: border-color 0.2s;
  }
  .lb-item:hover { border-color: var(--accent); }
  .lb-rank {
    font-family: 'Syne', sans-serif;
    font-size: 1.4rem;
    font-weight: 800;
    min-width: 32px;
  }
  .lb-rank.gold   { color: var(--yellow); }
  .lb-rank.silver { color: #aab4c8; }
  .lb-rank.bronze { color: #cd7f32; }
  .lb-info { flex: 1; }
  .lb-name { font-weight: 600; font-size: 0.9rem; }
  .lb-score { color: var(--muted); font-size: 0.78rem; }
  .lb-badge {
    background: rgba(99,120,255,0.15);
    border-radius: 6px;
    padding: 4px 8px;
    font-size: 0.7rem;
    font-weight: 700;
    color: var(--accent2);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  .lb-empty {
    text-align: center;
    color: var(--muted);
    font-size: 0.9rem;
    padding: 20px;
    grid-column: 1/-1;
  }

  /* QUIZ ZONE */
  #quiz-zone {
    position: relative;
    z-index: 1;
    padding: 80px 24px;
    max-width: 860px;
    margin: 0 auto;
  }

  /* DIFFICULTY CARDS */
  .diff-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    margin-top: 40px;
  }
  .diff-card {
    background: var(--surface);
    border: 2px solid var(--border);
    border-radius: var(--radius);
    padding: 36px 24px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
  }
  .diff-card::after {
    content: '';
    position: absolute;
    inset: 0;
    opacity: 0;
    transition: opacity 0.3s;
    border-radius: 14px;
  }
  .diff-card.easy::after    { background: radial-gradient(circle at center, rgba(52,211,153,0.08) 0%, transparent 70%); }
  .diff-card.medium::after  { background: radial-gradient(circle at center, rgba(251,191,36,0.08) 0%, transparent 70%); }
  .diff-card.tough::after   { background: radial-gradient(circle at center, rgba(248,113,113,0.08) 0%, transparent 70%); }
  .diff-card:hover::after { opacity: 1; }
  .diff-card.easy:hover   { border-color: var(--green); box-shadow: 0 0 30px rgba(52,211,153,0.15); transform: translateY(-4px); }
  .diff-card.medium:hover { border-color: var(--yellow); box-shadow: 0 0 30px rgba(251,191,36,0.15); transform: translateY(-4px); }
  .diff-card.tough:hover  { border-color: var(--red); box-shadow: 0 0 30px rgba(248,113,113,0.15); transform: translateY(-4px); }
  .diff-icon { font-size: 2.5rem; margin-bottom: 14px; }
  .diff-name { font-family: 'Syne', sans-serif; font-size: 1.2rem; font-weight: 800; margin-bottom: 6px; }
  .diff-desc { color: var(--muted); font-size: 0.82rem; line-height: 1.5; }
  .diff-meta { margin-top: 16px; display:flex; justify-content:center; gap:12px; }
  .diff-tag {
    font-size: 0.7rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 4px 10px;
    border-radius: 6px;
    background: var(--surface2);
    color: var(--muted);
  }

  /* TOPIC SELECTOR */
  .topic-selector {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 28px;
  }
  .topic-btn {
    background: var(--surface2);
    border: 1px solid var(--border);
    color: var(--muted);
    padding: 8px 18px;
    border-radius: 100px;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
  }
  .topic-btn:hover, .topic-btn.active {
    background: var(--accent);
    border-color: var(--accent);
    color: white;
  }

  /* QUIZ BOX */
  .quiz-box {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 40px;
    box-shadow: var(--card-glow);
    animation: fadeUp 0.4s ease both;
  }
  .quiz-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    flex-wrap: wrap;
    gap: 12px;
  }
  .progress-wrap {
    flex: 1;
    min-width: 200px;
  }
  .progress-info {
    display: flex;
    justify-content: space-between;
    font-size: 0.78rem;
    color: var(--muted);
    margin-bottom: 6px;
    font-weight: 500;
  }
  .progress-bar-bg {
    height: 4px;
    background: var(--surface2);
    border-radius: 100px;
    overflow: hidden;
  }
  .progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent), var(--accent2));
    border-radius: 100px;
    transition: width 0.4s ease;
  }
  .timer-chip {
    display: flex;
    align-items: center;
    gap: 6px;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 6px 14px;
    font-family: 'Syne', sans-serif;
    font-size: 0.95rem;
    font-weight: 700;
    color: var(--text);
    transition: border-color 0.3s, color 0.3s;
  }
  .timer-chip.warning { border-color: var(--yellow); color: var(--yellow); }
  .timer-chip.danger  { border-color: var(--red); color: var(--red); animation: timerPulse 0.5s ease infinite alternate; }
  @keyframes timerPulse { from{opacity:1;} to{opacity:0.5;} }

  .score-chip {
    background: rgba(52,211,153,0.1);
    border: 1px solid rgba(52,211,153,0.25);
    border-radius: 10px;
    padding: 6px 14px;
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--green);
  }

  .question-num {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: var(--accent);
    margin-bottom: 10px;
  }
  .question-text {
    font-family: 'Syne', sans-serif;
    font-size: 1.35rem;
    font-weight: 700;
    line-height: 1.4;
    margin-bottom: 28px;
    letter-spacing: -0.3px;
  }

  /* OPTIONS */
  .options-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 24px;
  }
  @media(max-width:560px) { .options-grid { grid-template-columns: 1fr; } }
  .option-btn {
    background: var(--surface2);
    border: 2px solid var(--border);
    border-radius: 12px;
    padding: 16px 18px;
    text-align: left;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 12px;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.9rem;
    font-weight: 400;
    color: var(--text);
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
  }
  .option-btn:hover:not(:disabled) {
    border-color: var(--accent);
    background: rgba(99,120,255,0.08);
  }
  .option-btn.selected {
    border-color: var(--accent);
    background: rgba(99,120,255,0.12);
  }
  .option-btn.correct {
    border-color: var(--green) !important;
    background: rgba(52,211,153,0.1) !important;
    color: var(--green);
  }
  .option-btn.wrong {
    border-color: var(--red) !important;
    background: rgba(248,113,113,0.1) !important;
    color: var(--red);
  }
  .option-btn:disabled { cursor: default; }
  .option-letter {
    width: 28px; height: 28px;
    background: var(--surface);
    border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    font-family: 'Syne', sans-serif;
    font-size: 0.8rem;
    font-weight: 800;
    flex-shrink: 0;
    border: 1px solid var(--border);
    transition: all 0.2s;
  }
  .option-btn.correct .option-letter { background: var(--green); border-color: var(--green); color: white; }
  .option-btn.wrong   .option-letter { background: var(--red);   border-color: var(--red);   color: white; }
  .option-btn.selected .option-letter { background: var(--accent); border-color: var(--accent); color: white; }

  /* FEEDBACK */
  .feedback-bar {
    height: 40px;
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 600;
    font-size: 0.9rem;
    margin-bottom: 16px;
    padding: 0 4px;
    transition: all 0.3s;
    opacity: 0;
  }
  .feedback-bar.show { opacity: 1; }
  .feedback-bar.correct-fb { color: var(--green); }
  .feedback-bar.wrong-fb   { color: var(--red); }
  .feedback-bar.skip-fb    { color: var(--yellow); }

  /* ACTION BUTTONS */
  .action-row {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
  }
  .btn-submit {
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: white;
    border: none;
    padding: 14px 32px;
    border-radius: 12px;
    font-family: 'Syne', sans-serif;
    font-size: 0.95rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 4px 20px rgba(99,120,255,0.35);
  }
  .btn-submit:hover { transform: translateY(-2px); box-shadow: 0 6px 28px rgba(99,120,255,0.5); }
  .btn-submit:disabled { opacity: 0.5; cursor: default; transform: none; }
  .btn-skip {
    background: var(--surface2);
    border: 1px solid var(--border);
    color: var(--muted);
    padding: 14px 24px;
    border-radius: 12px;
    font-family: 'Syne', sans-serif;
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
  }
  .btn-skip:hover { border-color: var(--accent); color: var(--text); }
  .btn-hint {
    background: rgba(251,191,36,0.1);
    border: 1px solid rgba(251,191,36,0.3);
    color: var(--yellow);
    padding: 14px 20px;
    border-radius: 12px;
    font-family: 'Syne', sans-serif;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    margin-left: auto;
  }
  .btn-hint:hover { background: rgba(251,191,36,0.18); }
  .btn-hint:disabled { opacity: 0.4; cursor: default; }

  .hint-box {
    margin-top: 14px;
    background: rgba(251,191,36,0.07);
    border: 1px solid rgba(251,191,36,0.2);
    border-radius: 10px;
    padding: 12px 16px;
    font-size: 0.85rem;
    color: var(--yellow);
    line-height: 1.5;
    display: none;
    animation: fadeUp 0.3s ease;
  }

  /* RESULT */
  .result-box {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 48px 40px;
    text-align: center;
    animation: fadeUp 0.5s ease both;
  }
  .result-emoji { font-size: 4rem; margin-bottom: 16px; display: block; }
  .result-title {
    font-family: 'Syne', sans-serif;
    font-size: 2rem;
    font-weight: 800;
    margin-bottom: 8px;
    letter-spacing: -0.5px;
  }
  .result-sub { color: var(--muted); margin-bottom: 36px; font-size: 0.95rem; }
  .score-ring-wrap { position: relative; width: 140px; height: 140px; margin: 0 auto 36px; }
  .score-ring {
    transform: rotate(-90deg);
    width: 140px; height: 140px;
  }
  .score-ring-bg { fill: none; stroke: var(--surface2); stroke-width: 8; }
  .score-ring-fill {
    fill: none;
    stroke: url(#ringGrad);
    stroke-width: 8;
    stroke-linecap: round;
    stroke-dasharray: 339.3;
    stroke-dashoffset: 339.3;
    transition: stroke-dashoffset 1s ease;
  }
  .score-ring-text {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  .score-pct {
    font-family: 'Syne', sans-serif;
    font-size: 1.8rem;
    font-weight: 800;
    line-height: 1;
  }
  .score-pct-label { font-size: 0.7rem; color: var(--muted); margin-top: 2px; text-transform: uppercase; letter-spacing: 1px; }
  .stats-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    margin-bottom: 32px;
  }
  .stat-card {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 18px;
  }
  .stat-card .num {
    font-family: 'Syne', sans-serif;
    font-size: 1.7rem;
    font-weight: 800;
    margin-bottom: 4px;
  }
  .stat-card .num.green  { color: var(--green); }
  .stat-card .num.red    { color: var(--red); }
  .stat-card .num.yellow { color: var(--yellow); }
  .stat-card .lbl { font-size: 0.75rem; color: var(--muted); text-transform: uppercase; letter-spacing: 0.8px; font-weight: 600; }

  .btn-restart {
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: white;
    border: none;
    padding: 16px 40px;
    border-radius: 14px;
    font-family: 'Syne', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 6px 24px rgba(99,120,255,0.4);
    margin: 0 auto;
    display: block;
  }
  .btn-restart:hover { transform: translateY(-2px); box-shadow: 0 10px 32px rgba(99,120,255,0.55); }

  .streak-badge {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: rgba(251,191,36,0.12);
    border: 1px solid rgba(251,191,36,0.3);
    border-radius: 10px;
    padding: 8px 16px;
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--yellow);
    margin-bottom: 24px;
  }

  /* REVIEW TABLE */
  .review-section { margin-top: 32px; text-align: left; }
  .review-title {
    font-family: 'Syne', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    margin-bottom: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .review-item {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 10px;
    font-size: 0.875rem;
    line-height: 1.5;
  }
  .review-q { font-weight: 600; margin-bottom: 6px; }
  .review-ans { display: flex; gap: 8px; flex-wrap: wrap; }
  .review-tag {
    padding: 3px 10px;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 600;
  }
  .review-tag.correct { background: rgba(52,211,153,0.15); color: var(--green); }
  .review-tag.wrong   { background: rgba(248,113,113,0.15); color: var(--red); }
  .review-tag.skip    { background: rgba(251,191,36,0.12);  color: var(--yellow); }

  /* USERNAME MODAL */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    backdrop-filter: blur(8px);
    z-index: 2000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
  }
  .modal-box {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 40px;
    max-width: 420px;
    width: 100%;
    text-align: center;
    animation: fadeUp 0.4s ease;
  }
  .modal-title {
    font-family: 'Syne', sans-serif;
    font-size: 1.6rem;
    font-weight: 800;
    margin-bottom: 8px;
    letter-spacing: -0.5px;
  }
  .modal-sub { color: var(--muted); font-size: 0.9rem; margin-bottom: 28px; }
  .input-wrap { position: relative; margin-bottom: 20px; }
  .modal-input {
    width: 100%;
    background: var(--surface2);
    border: 2px solid var(--border);
    border-radius: 12px;
    padding: 14px 18px;
    font-family: 'DM Sans', sans-serif;
    font-size: 1rem;
    color: var(--text);
    outline: none;
    transition: border-color 0.2s;
  }
  .modal-input:focus { border-color: var(--accent); }
  .btn-modal-go {
    width: 100%;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: white;
    border: none;
    padding: 15px;
    border-radius: 12px;
    font-family: 'Syne', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 4px 20px rgba(99,120,255,0.35);
  }
  .btn-modal-go:hover { transform: translateY(-1px); box-shadow: 0 6px 28px rgba(99,120,255,0.5); }

  /* CONTACT */
  .contact-box {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 40px;
  }
  .form-field {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 13px 16px;
    width: 100%;
    font-family: 'DM Sans', sans-serif;
    font-size: 0.9rem;
    color: var(--text);
    outline: none;
    margin-bottom: 12px;
    transition: border-color 0.2s;
  }
  .form-field:focus { border-color: var(--accent); }
  .btn-form {
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    color: white;
    border: none;
    padding: 14px 32px;
    border-radius: 10px;
    font-family: 'Syne', sans-serif;
    font-size: 0.9rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
  }
  .btn-form:hover { transform: translateY(-1px); }

  /* TOAST */
  .toast {
    position: fixed;
    bottom: 28px;
    right: 28px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 14px 20px;
    font-size: 0.88rem;
    font-weight: 500;
    box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    z-index: 3000;
    transform: translateY(80px);
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.34,1.56,0.64,1);
    display: flex;
    align-items: center;
    gap: 10px;
    max-width: 320px;
  }
  .toast.show { transform: translateY(0); opacity: 1; }

  /* FOOTER */
  footer {
    position: relative;
    z-index: 1;
    border-top: 1px solid var(--border);
    padding: 32px 24px;
    text-align: center;
    color: var(--muted);
    font-size: 0.85rem;
  }

  /* UTILITY */
  .hidden { display: none !important; }
  .text-center { text-align: center; }
  .divider {
    height: 1px;
    background: var(--border);
    margin: 0;
    position: relative;
    z-index: 1;
  }

  @media(max-width:600px) {
    .quiz-box { padding: 24px; }
    .result-box { padding: 28px 20px; }
    .stats-row { grid-template-columns: 1fr 1fr; }
    .hero-stats { gap: 28px; }
    .action-row { flex-direction: column; }
    .btn-hint { margin-left: 0; }
  }
</style>
</head>
<body>

<!-- Background -->
<div class="blob blob-1"></div>
<div class="blob blob-2"></div>
<div class="blob blob-3"></div>

<!-- Username Modal -->
<div class="modal-overlay" id="nameModal">
  <div class="modal-box">
    <div style="font-size:2.5rem;margin-bottom:14px;">üß†</div>
    <div class="modal-title">Welcome to QuizQuest</div>
    <div class="modal-sub">Enter your name to track your score on the leaderboard</div>
    <div class="input-wrap">
      <input class="modal-input" id="nameInput" type="text" placeholder="Your name‚Ä¶" maxlength="24" autocomplete="off"/>
    </div>
    <button class="btn-modal-go" onclick="setUsername()">Let's Go ‚Üí</button>
  </div>
</div>

<!-- NAVBAR -->
<nav id="navbar">
  <div class="nav-brand">QuizQuest</div>
  <div class="nav-right">
    <a class="nav-link-btn" href="#about">About</a>
    <a class="nav-link-btn" href="#quiz-zone">Take Test</a>
    <a class="nav-link-btn" href="#leaderboard">Leaderboard</a>
    <button class="theme-btn" id="themeBtn" title="Toggle theme">üåô</button>
  </div>
</nav>

<!-- HERO -->
<section class="hero" id="home">
  <div class="hero-badge">‚ú® &nbsp;30 Expert-Crafted Questions</div>
  <h1 class="hero-title">Master Your<br><span class="gradient-text">Knowledge</span></h1>
  <p class="hero-sub">Challenge yourself with topic-based quizzes across difficulty levels. Learn, compete, and track your progress in real time.</p>
  <div class="hero-stats">
    <div class="stat"><div class="stat-num">30</div><div class="stat-label">Questions</div></div>
    <div class="stat"><div class="stat-num">3</div><div class="stat-label">Levels</div></div>
    <div class="stat"><div class="stat-num">30s</div><div class="stat-label">Per Q</div></div>
  </div>
  <a href="#quiz-zone" class="cta-btn">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
    Start Quiz
  </a>
</section>

<div class="divider"></div>

<!-- FEATURES -->
<div class="section" id="about">
  <div class="section-label">Why QuizQuest</div>
  <div class="section-title">Built to make<br>learning <em>legendary</em></div>
  <div class="features-grid">
    <div class="feature-card">
      <div class="feature-icon">‚è±Ô∏è</div>
      <div class="feature-title">Timer-Based Pressure</div>
      <div class="feature-desc">30-second countdown per question. Visual urgency cues keep you sharp and engaged.</div>
    </div>
    <div class="feature-card">
      <div class="feature-icon">üí°</div>
      <div class="feature-title">Smart Hints</div>
      <div class="feature-desc">Stuck? Use one hint per question to eliminate wrong answers and learn on the fly.</div>
    </div>
    <div class="feature-card">
      <div class="feature-icon">üìä</div>
      <div class="feature-title">Detailed Results</div>
      <div class="feature-desc">End-of-quiz breakdown with score ring, per-question review, and performance summary.</div>
    </div>
    <div class="feature-card">
      <div class="feature-icon">üèÜ</div>
      <div class="feature-title">Leaderboard</div>
      <div class="feature-desc">Scores saved per session. Compete with yourself and see where you rank.</div>
    </div>
    <div class="feature-card">
      <div class="feature-icon">üåó</div>
      <div class="feature-title">Light & Dark Mode</div>
      <div class="feature-desc">Switch themes anytime. Your preference is remembered across visits.</div>
    </div>
    <div class="feature-card">
      <div class="feature-icon">üì±</div>
      <div class="feature-title">Fully Responsive</div>
      <div class="feature-desc">Seamless experience on desktop, tablet, and mobile ‚Äî no native app needed.</div>
    </div>
  </div>
</div>

<div class="divider"></div>

<!-- LEADERBOARD -->
<div class="leaderboard-strip" id="leaderboard">
  <div class="lb-title">üèÜ &nbsp;Leaderboard</div>
  <div class="lb-grid" id="lbGrid">
    <div class="lb-empty">No scores yet ‚Äî be the first to finish a quiz!</div>
  </div>
</div>

<div class="divider"></div>

<!-- QUIZ ZONE -->
<div id="quiz-zone">
  <div class="section-label" style="position:relative;z-index:1">Test Your Skills</div>
  <div class="section-title" style="position:relative;z-index:1;max-width:860px;margin:0 auto 8px;">Choose your<br><span style="background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">challenge level</span></div>

  <!-- DIFFICULTY SCREEN -->
  <div id="difficultyScreen">
    <div class="diff-grid">
      <div class="diff-card easy" onclick="startQuiz('easy')">
        <div class="diff-icon">üå±</div>
        <div class="diff-name" style="color:var(--green)">Easy</div>
        <div class="diff-desc">HTML & CSS fundamentals. Perfect for beginners warming up.</div>
        <div class="diff-meta">
          <span class="diff-tag">10 Questions</span>
          <span class="diff-tag">30s each</span>
        </div>
      </div>
      <div class="diff-card medium" onclick="startQuiz('intermediate')">
        <div class="diff-icon">‚ö°</div>
        <div class="diff-name" style="color:var(--yellow)">Intermediate</div>
        <div class="diff-desc">JavaScript & CSS deeper concepts. Prove your skills.</div>
        <div class="diff-meta">
          <span class="diff-tag">10 Questions</span>
          <span class="diff-tag">30s each</span>
        </div>
      </div>
      <div class="diff-card tough" onclick="startQuiz('tough')">
        <div class="diff-icon">üî•</div>
        <div class="diff-name" style="color:var(--red)">Tough</div>
        <div class="diff-desc">Advanced JS & CSS. Only for the bold and experienced.</div>
        <div class="diff-meta">
          <span class="diff-tag">10 Questions</span>
          <span class="diff-tag">30s each</span>
        </div>
      </div>
    </div>
  </div>

  <!-- QUIZ SCREEN -->
  <div id="quizScreen" class="hidden">
    <div class="quiz-box">
      <!-- Meta row -->
      <div class="quiz-meta">
        <div class="progress-wrap">
          <div class="progress-info">
            <span id="progressLabel">Question 1 of 10</span>
            <span id="streakLabel" style="color:var(--yellow)"></span>
          </div>
          <div class="progress-bar-bg">
            <div class="progress-bar-fill" id="progressFill" style="width:0%"></div>
          </div>
        </div>
        <div class="timer-chip" id="timerChip">‚è± <span id="timerNum">30</span>s</div>
        <div class="score-chip">‚úÖ <span id="liveScore">0</span> pts</div>
      </div>

      <!-- Question -->
      <div class="question-num" id="questionNum">Question 1</div>
      <div class="question-text" id="questionText">Loading‚Ä¶</div>

      <!-- Options -->
      <div class="options-grid" id="optionsGrid">
        <button class="option-btn" id="optA" onclick="selectOption(0)"><span class="option-letter">A</span><span id="optAtext"></span></button>
        <button class="option-btn" id="optB" onclick="selectOption(1)"><span class="option-letter">B</span><span id="optBtext"></span></button>
        <button class="option-btn" id="optC" onclick="selectOption(2)"><span class="option-letter">C</span><span id="optCtext"></span></button>
        <button class="option-btn" id="optD" onclick="selectOption(3)"><span class="option-letter">D</span><span id="optDtext"></span></button>
      </div>

      <!-- Feedback -->
      <div class="feedback-bar" id="feedbackBar"></div>

      <!-- Hint -->
      <div class="hint-box" id="hintBox"></div>

      <!-- Actions -->
      <div class="action-row">
        <button class="btn-submit" id="submitBtn" onclick="submitAnswer()">Submit Answer</button>
        <button class="btn-skip"   id="skipBtn"   onclick="skipQuestion()">Skip ‚Üí</button>
        <button class="btn-hint"   id="hintBtn"   onclick="useHint()">üí° Hint</button>
      </div>
    </div>
  </div>

  <!-- RESULT SCREEN -->
  <div id="resultScreen" class="hidden">
    <div class="result-box">
      <span class="result-emoji" id="resultEmoji">üéâ</span>
      <div class="result-title" id="resultTitle">Quiz Complete!</div>
      <div class="result-sub"   id="resultSub">Here's how you did</div>

      <div id="streakBadge" class="streak-badge hidden">üî• <span id="streakBadgeText"></span></div>

      <!-- Score Ring -->
      <div class="score-ring-wrap">
        <svg class="score-ring" viewBox="0 0 120 120">
          <defs>
            <linearGradient id="ringGrad" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" style="stop-color:#6378ff"/>
              <stop offset="100%" style="stop-color:#a78bfa"/>
            </linearGradient>
          </defs>
          <circle class="score-ring-bg" cx="60" cy="60" r="54"/>
          <circle class="score-ring-fill" id="ringFill" cx="60" cy="60" r="54"/>
        </svg>
        <div class="score-ring-text">
          <div class="score-pct" id="scorePct">0%</div>
          <div class="score-pct-label">Score</div>
        </div>
      </div>

      <div class="stats-row">
        <div class="stat-card">
          <div class="num green" id="rCorrect">0</div>
          <div class="lbl">Correct</div>
        </div>
        <div class="stat-card">
          <div class="num red" id="rWrong">0</div>
          <div class="lbl">Wrong</div>
        </div>
        <div class="stat-card">
          <div class="num yellow" id="rSkipped">0</div>
          <div class="lbl">Skipped</div>
        </div>
      </div>

      <button class="btn-restart" onclick="restartQuiz()">‚Ü∫ &nbsp;Play Again</button>

      <!-- Review -->
      <div class="review-section" id="reviewSection"></div>
    </div>
  </div>
</div>

<div class="divider"></div>

<!-- CONTACT -->
<div class="section" id="contact">
  <div class="section-label">Get in touch</div>
  <div class="section-title">Contact Us</div>
  <div class="contact-box" style="max-width:560px">
    <form id="contactForm">
      <input class="form-field" type="text" placeholder="Your Name" required/>
      <input class="form-field" type="email" placeholder="Your Email" required/>
      <textarea class="form-field" placeholder="Your Feedback or Question" rows="4" style="resize:vertical"></textarea>
      <button class="btn-form" type="submit">Send Message ‚Üí</button>
    </form>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <div style="font-family:'Syne',sans-serif;font-weight:800;font-size:1.1rem;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:8px;">QuizQuest</div>
  <p>¬© 2025 QuizQuest ‚Äî Developed by <strong>Nivetha M.K.</strong></p>
</footer>

<!-- TOAST -->
<div class="toast" id="toast">
  <span id="toastIcon">‚úÖ</span>
  <span id="toastText">Done!</span>
</div>

<script>
// ============================================================
// DATA
// ============================================================
const quizData = [
  // EASY
  { q:"What does CSS stand for?", opts:["Colorful Style Sheets","Cascading Style Sheets","Computer Style Sheets","Creative Style System"], ans:1, difficulty:"easy", hint:"Think of how styles 'flow' down from parent to child elements." },
  { q:"Which tag is used to insert an image in HTML?", opts:["<image>","<src>","<img>","<picture>"], ans:2, difficulty:"easy", hint:"It's a self-closing tag with just 3 letters." },
  { q:"Which symbol is used for single-line comments in JavaScript?", opts:["/* comment */","<!-- comment -->","// comment","# comment"], ans:2, difficulty:"easy", hint:"It's two of the same character, forward-facing." },
  { q:"Which attribute is used to define inline styles in HTML?", opts:["class","font","design","style"], ans:3, difficulty:"easy", hint:"It's the same word you'd use to describe someone's fashion sense." },
  { q:"Which HTML element is used for the largest heading?", opts:["<h6>","<heading>","<head>","<h1>"], ans:3, difficulty:"easy", hint:"Larger headings have smaller numbers." },
  { q:"Which operator is used for strict equality in JavaScript?", opts:["==","=","!=","==="], ans:3, difficulty:"easy", hint:"It checks both value AND type ‚Äî it's extra strict." },
  { q:"What is the correct HTML element for inserting a line break?", opts:["<break>","<lb>","<newline>","<br>"], ans:3, difficulty:"easy", hint:"Just two letters ‚Äî short for 'break'." },
  { q:"Which CSS property controls the text size?", opts:["text-style","text-size","font-style","font-size"], ans:3, difficulty:"easy", hint:"It combines the word 'font' with something that indicates magnitude." },
  { q:"Inside which HTML element do we put JavaScript?", opts:["<scripting>","<javascript>","<js>","<script>"], ans:3, difficulty:"easy", hint:"Named after exactly what it contains." },
  { q:"Which keyword is used to declare a variable in JavaScript?", opts:["dim","int","string","var"], ans:3, difficulty:"easy", hint:"Short for 'variable'." },

  // INTERMEDIATE
  { q:"Which CSS property is used to make text bold?", opts:["text-weight","font-bold","bold","font-weight"], ans:3, difficulty:"intermediate", hint:"It's a 'font' property that deals with the weight of letters." },
  { q:"Which HTML tag is used to define an unordered list?", opts:["<list>","<ol>","<li>","<ul>"], ans:3, difficulty:"intermediate", hint:"U stands for‚Ä¶ unordered!" },
  { q:"Which method adds a new element at the end of a JS array?", opts:["pop()","append()","add()","push()"], ans:3, difficulty:"intermediate", hint:"Think of pushing something onto a stack." },
  { q:"Which CSS property changes text color?", opts:["font-color","text-color","background-color","color"], ans:3, difficulty:"intermediate", hint:"The simplest, most direct property name possible." },
  { q:"Which JS method converts JSON data to an object?", opts:["JSON.toObject()","JSON.stringify()","JSON.convert()","JSON.parse()"], ans:3, difficulty:"intermediate", hint:"It 'parses' a JSON string into usable data." },
  { q:"Which HTML attribute specifies a unique identifier for an element?", opts:["class","style","name","id"], ans:3, difficulty:"intermediate", hint:"Short for 'identifier' ‚Äî uniqueness is the key." },
  { q:"Which symbol is used for single-line comments in CSS?", opts:["// comment","# comment","<!-- comment -->","/* comment */"], ans:3, difficulty:"intermediate", hint:"CSS uses the same comment style as C languages." },
  { q:"Which event fires when a user clicks an HTML element?", opts:["onmouseclick","onmouseover","onchange","onclick"], ans:3, difficulty:"intermediate", hint:"It literally starts with 'on' and ends with 'click'." },
  { q:"Which CSS property hides an element without removing its space?", opts:["display: none","opacity: 0","z-index: -1","visibility: hidden"], ans:3, difficulty:"intermediate", hint:"The element is still 'there', just not visible." },
  { q:"Which JS keyword declares a constant variable?", opts:["var","let","define","const"], ans:3, difficulty:"intermediate", hint:"Short for 'constant' ‚Äî it won't change." },

  // TOUGH
  { q:"Which method selects all elements with a given class in JS?", opts:["getElementById()","querySelector()","querySelectorAll()","getElementsByClassName()"], ans:3, difficulty:"tough", hint:"It returns a live HTMLCollection of ALL matching class elements." },
  { q:"Which CSS property controls element stacking order?", opts:["position","order","display","z-index"], ans:3, difficulty:"tough", hint:"It uses an axis that goes 'into' your screen ‚Äî the Z axis." },
  { q:"Which JS function schedules code execution after a delay?", opts:["setInterval()","delay()","sleep()","setTimeout()"], ans:3, difficulty:"tough", hint:"It 'times out' after a specified number of milliseconds." },
  { q:"Which keyword handles errors in JavaScript?", opts:["error","throw","catchError","try...catch"], ans:3, difficulty:"tough", hint:"You 'try' code that might fail, then 'catch' the error." },
  { q:"Which CSS property applies transformations like rotate or scale?", opts:["transform()","transition()","translate()","transform"], ans:3, difficulty:"tough", hint:"It's a CSS property (not a function) ‚Äî no parentheses." },
  { q:"Which JS operator spreads elements of an array?", opts:["&&","++","**","..."], ans:3, difficulty:"tough", hint:"Three dots ‚Äî used to 'spread' or 'rest' values." },
  { q:"Which method removes the last element from an array and returns it?", opts:["shift()","slice()","splice()","pop()"], ans:3, difficulty:"tough", hint:"Think of a balloon 'popping' off the end." },
  { q:"Which CSS property makes flex children wrap onto multiple lines?", opts:["flex-flow","flex-direction","align-items","flex-wrap"], ans:3, difficulty:"tough", hint:"The word 'wrap' is literally in the property name." },
  { q:"Which JS method converts an object into a JSON string?", opts:["JSON.parse()","toJSON()","convertJSON()","JSON.stringify()"], ans:3, difficulty:"tough", hint:"It 'stringifies' ‚Äî turns it into a string." },
  { q:"Which HTML attribute loads a script file asynchronously?", opts:["defer","load","delay","async"], ans:3, difficulty:"tough", hint:"Short for 'asynchronous'." }
];

// ============================================================
// STATE
// ============================================================
let userName = 'Player';
let currentLevel = null;
let questions = [];
let currentQ = 0;
let score = 0;
let skipped = 0;
let wrong = 0;
let selectedOpt = null;
let hintUsed = false;
let timerInterval = null;
let timeLeft = 30;
let currentStreak = 0;
let maxStreak = 0;
let answers = []; // for review
let leaderboard = JSON.parse(localStorage.getItem('qqLeaderboard') || '[]');

const OPTS = [0,1,2,3];
const LETTERS = ['A','B','C','D'];

// ============================================================
// DOM REFS
// ============================================================
const diffScreen   = document.getElementById('difficultyScreen');
const quizScreen   = document.getElementById('quizScreen');
const resultScreen = document.getElementById('resultScreen');
const nameModal    = document.getElementById('nameModal');
const nameInput    = document.getElementById('nameInput');

// ============================================================
// INIT
// ============================================================
window.onload = () => {
  const saved = localStorage.getItem('qqTheme');
  if(saved === 'light') applyTheme('light');
  
  const savedName = localStorage.getItem('qqName');
  if(savedName) { userName = savedName; nameModal.style.display = 'none'; }
  else { nameInput.focus(); }

  renderLeaderboard();
  
  nameInput.addEventListener('keydown', e => { if(e.key === 'Enter') setUsername(); });
};

function setUsername() {
  const val = nameInput.value.trim();
  if(!val) { showToast('‚ö†Ô∏è', 'Please enter your name'); return; }
  userName = val;
  localStorage.setItem('qqName', val);
  nameModal.style.display = 'none';
  showToast('üëã', `Welcome, ${userName}!`);
}

// ============================================================
// THEME
// ============================================================
document.getElementById('themeBtn').addEventListener('click', () => {
  const isLight = document.documentElement.getAttribute('data-theme') === 'light';
  applyTheme(isLight ? 'dark' : 'light');
});

function applyTheme(theme) {
  document.documentElement.setAttribute('data-theme', theme === 'light' ? 'light' : '');
  document.getElementById('themeBtn').textContent = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
  localStorage.setItem('qqTheme', theme);
}

// ============================================================
// QUIZ START
// ============================================================
function startQuiz(level) {
  currentLevel = level;
  questions = quizData.filter(q => q.difficulty === level);
  currentQ = 0; score = 0; skipped = 0; wrong = 0;
  currentStreak = 0; maxStreak = 0;
  answers = [];
  selectedOpt = null; hintUsed = false;

  diffScreen.classList.add('hidden');
  resultScreen.classList.add('hidden');
  quizScreen.classList.remove('hidden');
  document.getElementById('quizScreen').scrollIntoView({ behavior:'smooth' });
  loadQuestion();
}

// ============================================================
// LOAD QUESTION
// ============================================================
function loadQuestion() {
  clearInterval(timerInterval);
  selectedOpt = null;
  hintUsed = false;

  const data = questions[currentQ];
  const total = questions.length;
  const pct   = Math.round((currentQ / total) * 100);

  document.getElementById('progressLabel').textContent = `Question ${currentQ+1} of ${total}`;
  document.getElementById('progressFill').style.width  = pct + '%';
  document.getElementById('questionNum').textContent   = `Question ${currentQ+1}`;
  document.getElementById('questionText').textContent  = data.q;
  document.getElementById('liveScore').textContent = score;

  // Populate options (shuffled per question display)
  const optIds = ['optA','optB','optC','optD'];
  const textIds = ['optAtext','optBtext','optCtext','optDtext'];
  data.opts.forEach((opt, i) => {
    const btn = document.getElementById(optIds[i]);
    document.getElementById(textIds[i]).textContent = opt;
    btn.className = 'option-btn';
    btn.disabled = false;
    btn.querySelector('.option-letter').textContent = LETTERS[i];
  });

  // Streak label
  const sl = document.getElementById('streakLabel');
  sl.textContent = currentStreak >= 2 ? `üî• ${currentStreak} streak` : '';

  // Feedback
  const fb = document.getElementById('feedbackBar');
  fb.className = 'feedback-bar';
  fb.textContent = '';

  // Hint
  document.getElementById('hintBox').style.display = 'none';
  document.getElementById('hintBox').textContent = '';
  const hintBtn = document.getElementById('hintBtn');
  hintBtn.disabled = false;
  hintBtn.style.opacity = '1';

  // Buttons
  document.getElementById('submitBtn').disabled = false;
  document.getElementById('skipBtn').disabled   = false;

  // Timer
  timeLeft = 30;
  updateTimerChip();
  timerInterval = setInterval(() => {
    timeLeft--;
    updateTimerChip();
    if(timeLeft <= 0) { clearInterval(timerInterval); autoSkip(); }
  }, 1000);
}

function updateTimerChip() {
  const chip = document.getElementById('timerChip');
  document.getElementById('timerNum').textContent = timeLeft;
  chip.className = 'timer-chip';
  if(timeLeft <= 5)       chip.classList.add('danger');
  else if(timeLeft <= 10) chip.classList.add('warning');
}

// ============================================================
// SELECT OPTION
// ============================================================
function selectOption(index) {
  if(document.getElementById('submitBtn').disabled) return;
  selectedOpt = index;
  const optIds = ['optA','optB','optC','optD'];
  optIds.forEach((id, i) => {
    const btn = document.getElementById(id);
    btn.classList.toggle('selected', i === index);
  });
}

// ============================================================
// SUBMIT
// ============================================================
function submitAnswer() {
  if(selectedOpt === null) { showToast('‚ö†Ô∏è', 'Please select an answer first!'); return; }
  clearInterval(timerInterval);
  processAnswer(selectedOpt);
}

function skipQuestion() {
  clearInterval(timerInterval);
  processAnswer(null);
}

function autoSkip() {
  processAnswer(null);
}

function processAnswer(chosen) {
  const data     = questions[currentQ];
  const correct  = data.ans;
  const optIds   = ['optA','optB','optC','optD'];
  const fb       = document.getElementById('feedbackBar');

  // Disable all
  optIds.forEach(id => { document.getElementById(id).disabled = true; });
  document.getElementById('submitBtn').disabled = true;
  document.getElementById('skipBtn').disabled   = true;
  document.getElementById('hintBtn').disabled   = true;

  // Mark correct always
  document.getElementById(optIds[correct]).classList.add('correct');

  // Record
  const isCorrect = chosen === correct;
  const isSkip    = chosen === null;

  if(isCorrect) {
    score++;
    currentStreak++;
    maxStreak = Math.max(maxStreak, currentStreak);
    fb.textContent = '‚úÖ Correct!';
    fb.className = 'feedback-bar show correct-fb';
  } else if(isSkip) {
    skipped++;
    currentStreak = 0;
    fb.textContent = '‚è© Skipped ‚Äî check the highlighted answer!';
    fb.className = 'feedback-bar show skip-fb';
  } else {
    wrong++;
    currentStreak = 0;
    document.getElementById(optIds[chosen]).classList.add('wrong');
    fb.textContent = '‚ùå Wrong ‚Äî see the correct answer above.';
    fb.className = 'feedback-bar show wrong-fb';
  }

  answers.push({ q: data.q, chosen, correct, isSkip, opts: data.opts });

  document.getElementById('liveScore').textContent = score;
  document.getElementById('streakLabel').textContent = currentStreak >= 2 ? `üî• ${currentStreak} streak` : '';

  setTimeout(() => {
    currentQ++;
    if(currentQ < questions.length) loadQuestion();
    else showResult();
  }, 1300);
}

// ============================================================
// HINT
// ============================================================
function useHint() {
  if(hintUsed) return;
  hintUsed = true;
  const data = questions[currentQ];
  const hintBox = document.getElementById('hintBox');
  hintBox.textContent = 'üí° ' + data.hint;
  hintBox.style.display = 'block';
  document.getElementById('hintBtn').disabled = true;
  document.getElementById('hintBtn').style.opacity = '0.4';
}

// ============================================================
// RESULT
// ============================================================
function showResult() {
  quizScreen.classList.add('hidden');
  resultScreen.classList.remove('hidden');
  resultScreen.scrollIntoView({ behavior:'smooth' });

  const total  = questions.length;
  const pct    = Math.round((score / total) * 100);

  // Emoji / title
  let emoji = 'üòê', title = 'Good Effort!';
  if(pct === 100)      { emoji = 'üèÜ'; title = 'Perfect Score!'; }
  else if(pct >= 80)   { emoji = 'üéâ'; title = 'Excellent Work!'; }
  else if(pct >= 60)   { emoji = 'üòä'; title = 'Well Done!'; }
  else if(pct >= 40)   { emoji = 'üìö'; title = 'Keep Practicing!'; }
  else                  { emoji = 'üí™'; title = "Don't Give Up!"; }

  document.getElementById('resultEmoji').textContent = emoji;
  document.getElementById('resultTitle').textContent = title;
  document.getElementById('resultSub').textContent   = `You scored ${score} out of ${total} on ${currentLevel} level`;
  document.getElementById('rCorrect').textContent    = score;
  document.getElementById('rWrong').textContent      = wrong;
  document.getElementById('rSkipped').textContent    = skipped;
  document.getElementById('scorePct').textContent    = pct + '%';

  // Streak badge
  if(maxStreak >= 3) {
    document.getElementById('streakBadge').classList.remove('hidden');
    document.getElementById('streakBadgeText').textContent = `Best streak: ${maxStreak} in a row!`;
  } else {
    document.getElementById('streakBadge').classList.add('hidden');
  }

  // Ring animation
  const circumference = 339.3;
  const offset = circumference - (pct / 100) * circumference;
  setTimeout(() => {
    document.getElementById('ringFill').style.strokeDashoffset = offset;
  }, 200);

  // Review section
  buildReview();

  // Save to leaderboard
  saveToLeaderboard(pct);
}

function buildReview() {
  const el = document.getElementById('reviewSection');
  el.innerHTML = `<div class="review-title">üìã &nbsp;Question Review</div>`;
  answers.forEach((a, i) => {
    const status = a.isSkip ? 'skip' : (a.chosen === a.correct ? 'correct' : 'wrong');
    const statusLabel = a.isSkip ? 'Skipped' : (status === 'correct' ? 'Correct' : 'Wrong');
    const yourAnswer  = a.isSkip ? '‚Äî' : a.opts[a.chosen];
    const correctAns  = a.opts[a.correct];
    el.innerHTML += `
      <div class="review-item">
        <div class="review-q">Q${i+1}. ${a.q}</div>
        <div class="review-ans">
          <span class="review-tag ${status}">${statusLabel}</span>
          ${status !== 'correct' ? `<span style="color:var(--muted);font-size:0.78rem">Your: ${yourAnswer} &nbsp;|&nbsp; Correct: <strong>${correctAns}</strong></span>` : `<span style="color:var(--muted);font-size:0.78rem">${correctAns}</span>`}
        </div>
      </div>`;
  });
}

function saveToLeaderboard(pct) {
  const entry = { name: userName, pct, level: currentLevel, date: new Date().toLocaleDateString() };
  leaderboard.push(entry);
  leaderboard.sort((a,b) => b.pct - a.pct);
  leaderboard = leaderboard.slice(0,10);
  localStorage.setItem('qqLeaderboard', JSON.stringify(leaderboard));
  renderLeaderboard();
}

function renderLeaderboard() {
  const grid = document.getElementById('lbGrid');
  if(!leaderboard.length) {
    grid.innerHTML = '<div class="lb-empty">No scores yet ‚Äî be the first to finish a quiz!</div>';
    return;
  }
  const rankClasses = ['gold','silver','bronze'];
  grid.innerHTML = leaderboard.slice(0,5).map((e,i) => `
    <div class="lb-item">
      <div class="lb-rank ${rankClasses[i] || ''}">${i+1}</div>
      <div class="lb-info">
        <div class="lb-name">${e.name}</div>
        <div class="lb-score">${e.pct}% ¬∑ ${e.level} ¬∑ ${e.date}</div>
      </div>
      <div class="lb-badge">${e.level[0].toUpperCase()}</div>
    </div>
  `).join('');
}

// ============================================================
// RESTART
// ============================================================
function restartQuiz() {
  resultScreen.classList.add('hidden');
  diffScreen.classList.remove('hidden');
  document.getElementById('quiz-zone').scrollIntoView({ behavior:'smooth' });
}

// ============================================================
// TOAST
// ============================================================
function showToast(icon, msg) {
  const t = document.getElementById('toast');
  document.getElementById('toastIcon').textContent = icon;
  document.getElementById('toastText').textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3000);
}

// ============================================================
// CONTACT FORM
// ============================================================
document.getElementById('contactForm').addEventListener('submit', e => {
  e.preventDefault();
  showToast('üì¨', 'Thanks for your message!');
  e.target.reset();
});
</script>
</body>
</html>